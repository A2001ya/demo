<!DOCTYPE html>
<html xmlns:th="http://www.thyleeaf.org">
<head>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<meta charset="ISO-8859-1">
<title>Homepage</title>
<link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
	integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
	integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"></script>
<script th:src="@{/js/jquery-3.1.1.min.js}"></script>
<script th:src="@{/chartjs/chart.min.js}"></script>


<style>
footer {
	text-align: center;
	padding: 3px;
	bottom: 0;
	background-color: DarkSalmon;
	color: white;
}

div.relative {
  position: relative;
  left: 30px;
  border: 3px solid #73AD21;
}

</style>
</head>
<body>

	
		
		<!--<div class="text-center p-3 mb-2 bg-dark text-white"><h1>Welcome to Student Management APP <i class="bi bi-mortarboard-fill"></i></h1>
	</div>-->
	
			<nav class="navbar navbar-expand-lg  navbar-light" style="background-color: #007bff;">
				<a class="navbar-brand" href="#"></a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>


				<ul class="navbar-nav mr-auto">
					<li class="nav-item active"><a class="nav-link" href="@{/index}"><font color="white">
							<blockquote class="blockquote"><p class="mb-0"><i class="bi bi-house-door-fill"></i>Home</p> </blockquote> </font></a></li>
					<li class="nav-item"><a class="nav-link" th:href="@{/departement}" style="margin-left: 7px"><font color="white">
						<blockquote class="blockquote"><p class="mb-0"><i class="bi bi-clipboard-data-fill"></i> Departement</p> </blockquote></font> </a></li>
					<li class="nav-item"><a class="nav-link" th:href="@{/student}" style="margin-left: 7px"><font color="white">
						<blockquote class="blockquote"><p class="mb-0"><i class="bi bi-people-fill"></i><strong> Etudiants </strong></p> </blockquote></font></a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/professeur}" style="margin-left: 7px"><font color="white">
					<blockquote class="blockquote"><p class="mb-0"><i class="bi bi-person-video3"></i><strong> Professeur </strong></p> </blockquote></font></a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/Filiere}" style="margin-left: 7px"><font color="white">
					
					<blockquote class="blockquote"><p class="mb-0">	<i class="bi bi-columns"></i></i><strong> Filiere</strong></p> </blockquote></font> </a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/Module}" style="margin-left: 7px"><font color="white">
				<blockquote class="blockquote"><p class="mb-0">	<i class="bi bi-layout-text-sidebar"></i><strong> Module</strong></p> </blockquote></font> </a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/Element}" style="margin-left: 7px"><font color="white">
						<blockquote class="blockquote"><p class="mb-0">	<i class="bi bi-grid-fill"></i><strong> Element</strong></p> </blockquote></font> </a></li>
					
						<li class="nav-item"><a class="nav-link" th:href="@{/compte}" style="margin-left: 7px"><font color="white">
						<blockquote class="blockquote"><p class="mb-0">	<i class="bi bi-person-circle"></i><strong> Compte</strong></p> </blockquote></font> </a></li>	
				</ul>
				

			</nav>
<!-- 		</div> -->
<!-- 	</div> -->
	
	
	


<div class="w3-content w3-section" >

  <img  src="https://t4.ftcdn.net/jpg/02/43/30/33/360_F_243303397_OC20dJaMNwxJZ70XcyMCfoN99VyxBNOQ.jpg
  "width="100%"     ;>
</div>
	
	<div class="container">
	
	<div class="row" >
	<div class="col-3"></div>
			<div class="col-3">
				<div class="card bg-light" style="width: 18rem;">
					<div class="card-body">
					<div class="p-1 mb-2">
						<h3 class="card-title" align="center"><i class="bi bi-person-circle"></i> Students</h3></div>
						<h2 th:text="${var}" align="center"></h2>
					</div>
				</div>

			</div>
	
	
	
			<div class="col-3">
				<div class="card bg-light" style="width: 18rem;">
					<div class="card-body">
					<div class="p-1 mb-2">
						<h3 class="card-title" align="center"><i
							class="bi bi-clipboard-data-fill"></i> Departements</h3></div>
						<h2 th:text="${dp}" align="center"></h2>
					</div>
				</div>

			</div>
			<div class="col-2"></div>
	</div>
	</div>
<script>
var myIndex = 0;
carousel();

function carousel() {
  var i;
  var x = document.getElementsByClassName("mySlides");
  for (i = 0; i < x.length; i++) {
    x[i].style.display = "none";  
  }
  myIndex++;
  if (myIndex > x.length) {myIndex = 1}    
  x[myIndex-1].style.display = "block";  
  setTimeout(carousel, 9000);    
}
</script>




	<script>
		var date = new Date();
		document.getElementById("time").innerHTML = date;
	</script>

<br>
	<div class="col-xs-12 text-center p-3 mb-2 bg-primary text-white">
		<h3>Répartition Des étudiants par Département <i class="bi bi-graph-up-arrow"></i></h3>
	</div>
	<br>
	<div class="row offset-2">
		<div class="col-md-4">
		<h2 align="center">Diagramme circulaire <i class="bi bi-pie-chart-fill"></i></h2>
			<canvas id="reportingByDepartementA" width="100%" height="100%"></canvas>
		</div>
		<div class="col-md-4 offset-2 ">
		<h2 align="center">Diagramme à bandes <i class="bi bi-bar-chart-line-fill"></i></h2>
			<canvas id="reportingByDepartementB" width="100%" height="100%"></canvas>
		</div>
	</div>
	
	<script type="text/javascript">
		jQuery(function($) {
			$.ajax({
				type : "GET",
				url : "/reportByDepartement",
				success : function(response) {
					var labels = [];
					var datas = [];
					for ( var index in response) {
						labels.push(response[index][0]);
						datas.push(response[index][1]);
					}
					var ctx = document
							.getElementById("reportingByDepartementA")
							.getContext('2d');
					if (datas.length > 0) {
						var myChart = new Chart(ctx, {
							type : 'pie',
							data : {
								labels : labels,
								datasets : [ {
									label : 'Student by department',
									data : datas,
									backgroundColor : [ "#f9b594", "#19564c",
											"#d94d31", "#1d7e49", "#47caff",
											"#3e95cd", ],
									borderWidth : 1
								} ]
							},
							options : {
								responsive : true,
								legend : {
									position : 'right',
								},
								title : {
									display : true,
									text : 'Student by department',
									fontSize : 20
								},
								animation : {
									animateScale : true,
									animateRotate : true
								},
								pieceLabel : {
									renders : 'data',
									fontColor : '#000',
									position : 'outside',
									segment : true,
								}
							}
						});
					}
				},
				error : function(e) {
					alert('Error: ' + e);
				}
			});

			$.ajax({
				type : "GET",
				url : "/reportByDepartement",
				success : function(response) {
					var labels = [];
					var datas = [];
					for ( var index in response) {
						labels.push(response[index][0]);
						datas.push(response[index][1]);
					}
					var ctx = document
							.getElementById("reportingByDepartementB")
							.getContext('2d');
					if (datas.length > 0) {
						var myChart = new Chart(ctx, {
							type : 'bar',
							data : {
								labels : labels,
								datasets : [ {
									label : 'Student by department',
									data : datas,
									backgroundColor : [ "#f9b594", "#19564c",
											"#e8c3b9", "#c44800" ],
									borderWidth : 1
								} ]
							},
							options : {
								responsive : true,
								scales: {
									yAxes: [{
									ticks: {
									beginAtZero: true,
									userCallback: function(label, index, labels) {
									// when the floored value is the same as the value we have a whole number
									if (Math.floor(label) === label) {
									return label;
									}

									},
									}
									}],
									},
								legend : {
									position : 'right',
								},
								title : {
									display : true,
									text : 'Student by department',
									fontSize : 20
								},
								animation : {
									animateScale : true,
									animateRotate : true
								},
								pieceLabel : {
									renders : 'data',
									fontColor : '#000',
									position : 'outside',
									segment : true,
								}
							}
						});
					}
				},
				error : function(e) {
					alert('Error: ' + e);
				}
			});

		});
	</script>

</body>
</html>